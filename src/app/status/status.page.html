
<ion-fab  vertical="top" horizontal="end" slot="fixed">
    <ion-fab-button color="dark" (click)="perfilPage()">
      <ion-icon style="color:#ffcb02 !important" name="person-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>

<ion-content [fullscreen]="true">
<div class="background-div1">
    <img style="width:35%"src="/assets/Picture1.png">
</div>
  <ion-fab  vertical="bottom" horizontal="start" slot="fixed">
    <ion-fab-button color="dark" (click)="home()">
      <ion-icon style="color:#ffcb02 !important" name="home-outline">
      </ion-icon>
    </ion-fab-button>
  </ion-fab>


  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div style="text-align: center;" *ngIf="typeUser === 'user' && valorre === 0">
        <p>Parece que voc√™ n√£o tem pedidos...</p>
        <p>Come√ße a comprar agora!</p>
        <ion-button fill="solid" color="warning" (click)="lista()" slot="end">Comprar</ion-button>
    </div> 
<div class="background-traco" *ngIf=" typeUser === 'user' && valorre > 0 ">
  <h2 style="text-align: center; padding-top: 22px;">Seus Pedidos</h2>


    <ion-searchbar  *ngIf="typeUser === 'user'"  animated style="margin-top:3.5% !important;" placeholder="Pesquise pela loja" (ionInput)="filterList($event)"></ion-searchbar>
		<ion-searchbar  *ngIf="typeUser === 'Loja'"  animated style="margin-top:3.5% !important;" placeholder="Pesquise o n√∫mero do pedido" (ionInput)="filterList($event)"></ion-searchbar>
  
  
    <ion-segment style="background: white;" scrollable (ionChange)="filterList2($event)" value="{{valorinicial}}">
    <ion-segment-button style="width: auto !important; min-width: 160px;" *ngFor="let items of categorias" value="{{items}}">
      <p value="{{items}}">{{items}}</p>
    </ion-segment-button>

  </ion-segment>  
  <ion-list style="background: transparent"  >


    <ion-card *ngFor="let items of goalListUs; let i = index" style="padding: 10px;
    box-shadow: 0.5px 0.5px 5px 5px #80808047; margin-bottom: 10%; background:white;">
      <h4 style="text-align: center;">{{items.nomeLoja}}</h4>
      <ion-item>
        <ion-label style="font-size: larger;
        font-weight: 400;
        color: black;"> {{items.statusEnt}}</ion-label>
        <p slot="end">Ped: {{items.nPedido}}</p>


      </ion-item>

      <ion-progress-bar *ngIf="items.statusEnt != 'Entregue' && items.statusEnt !='Cancelado'" color="warning" type="indeterminate"></ion-progress-bar>
        <p *ngIf="items.statusEnt != 'Entregue' && items.statusEnt !='Cancelado'" style="padding:10px;margin-bottom: 3%;
        color: black;">Normalmente as lojas demoram 30 minutos para responderüòâ</p>
      <div *ngIf="items.statusEnt === 'Entregue'">
        <ion-button fill="solid" expand="block" style="font-weight: 400;" *ngIf="!items.comentario"  color="warning" (click)="novoComment(items)">Como foi a sua compra?</ion-button>
      </div>
      <div *ngIf="items.statusEnt === 'Loja informada'" >
        <ion-button fill="solid" expand="block" style="font-weight: 400;"  (click)="save(items)" color="danger">Cancelar Compra</ion-button>
      </div>
      <div *ngIf="items.statusEnt != 'Entregue' && items.statusEnt !='Cancelado'">
        <ion-button fill="solid" expand="block" style="font-weight: 400;" color="success" (click)="novoChat(items)">Fale com a loja</ion-button>
      </div>
      <ion-button color="light" expand="block" [routerLink]="['/item-venda/' + items.id]">Mais informa√ß√µes</ion-button>
      <!--ion-card-content >


        <p> Valor ‚Ä¢ R${{items.valor}}</p>
        <p> Data da compra ‚Ä¢ {{items.dia}}</p>
        <p> Status de pagamento ‚Ä¢ {{items.statusPag}}</p>
        <p> N√∫mero do pedido ‚Ä¢ {{items.nPedido}}</p>
        <p slot="end">Endere√ßo ‚Ä¢ {{items.endereco}} </p>

       <br/> 
       <ion-button fill="solid" expand="block" color="warning" >Veja mais</ion-button>

      </ion-card-content-->

    </ion-card>

  </ion-list>
  
</div>




<div style="text-align: center;" *ngIf="typeUser === 'Loja' && valorreST === 0">
  <p>Parece que voc√™ n√£o tem pedidos...</p>
  <p>Come√ße a vender agora!</p>


</div>
<div *ngIf="typeUser === 'Loja' && valorreST > 0" class="background-traco">
  <h2 style="text-align: center; padding-top: 22px;">Seus Pedidos</h2>


      <ion-searchbar  *ngIf="typeUser === 'Loja'"  animated style="margin-top:3.5% !important;" placeholder="Pesquise o n√∫mero do pedido" (ionInput)="filterList($event)"></ion-searchbar>
    
    
      <ion-segment *ngIf="typeUser === 'Loja'"  style="background: white;" scrollable (ionChange)="filterList2($event)" value="{{valorinicial}}">
      <ion-segment-button style="width: auto !important; min-width: 160px;" *ngFor="let items of categoriasLoja" value="{{items}}">
        <p value="{{items}}">{{items}}</p>
      </ion-segment-button>
  
    </ion-segment>  
    <ion-button expand="block" *ngIf="typeUser === 'Loja'" style="--background: #002946;
  margin-top: 15px;
  font-weight: bold;" (click)="mojuba()">Seus Ganhos</ion-button>
  <ion-list *ngFor="let items of goalListST" >
    <ion-card style="padding: 10px;
    box-shadow: 0.5px 0.5px 5px 5px #80808047; margin-bottom: 10%; background:white;">
      <ion-icon *ngIf="items.statusEnt === 'Loja informada'" class="sino" color="danger" name="notifications-sharp"></ion-icon>
      <ion-badge *ngIf="items.statusEnt === 'Loja informada'"color="danger">Novo pedido</ion-badge>


      <ion-card-header>
        <h4 style="text-align: center;">{{items.nPedido}}</h4>

      </ion-card-header>
      <ion-item>
        
        <ion-label style="font-size: larger;
        font-weight: 400;
        color: black;"> {{items.statusEnt}}</ion-label>

      </ion-item>
      <p *ngIf="items.statusEnt != 'Entregue' && items.statusEnt !='Cancelado'" style="padding:10px;margin-bottom: 3%;
      color: black;">Fale com seus clientes o mais r√°pido poss√≠vel! üòâ</p>
      <div *ngIf="items.statusEnt === 'Loja informada'" >
        <ion-button fill="solid" expand="block" style="font-weight: 400;" (click)="save(items)" color="danger">Cancelar Compra</ion-button>
      </div>
      <div *ngIf="items.statusEnt != 'Entregue' && items.statusEnt !='Cancelado'">
        <ion-button fill="solid" expand="block" style="font-weight: 400;" color="success" (click)="novoChat(items)">Fale com o cliente</ion-button>
      </div>
      <ion-button color="light" expand="block" [routerLink]="['/item-venda/' + items.id]">Mais informa√ß√µes</ion-button>

      <ion-card-content>
        <p> Valor ‚Ä¢ R${{items.valor}}</p>
        <p> Data da compra ‚Ä¢ {{items.dia}}</p>
        <p> Status de pagamento ‚Ä¢ {{items.statusPag}}</p>
        <p slot="end">Endere√ßo ‚Ä¢ {{items.endereco}} </p><br/>
      </ion-card-content>

    </ion-card>

  </ion-list>
</div>
</ion-content>
